<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Manual Input - Network Prediction</title>
</head>
<body>
  <h2>Enter Test Parameters</h2>
  <label>Backend URL: <input id="backendUrl" type="url" placeholder="https://your-backend.onrender.com"></label><br><br>
  <label>Latitude: <input id="lat" type="number" step="0.0001"></label><br>
  <label>Longitude: <input id="lon" type="number" step="0.0001"></label><br>
  <label>Timestamp: <input id="ts" type="text" placeholder="2025-09-08T16:00:00"></label><br>
  <label>Test Type: <input id="tt" type="text" placeholder="RSRP"></label><br><br>
  <button onclick="submitManual()">Predict</button>
  <p id="status"></p>
  <pre id="output"></pre>

  <script>
    async function submitManual() {
      const backend = document.getElementById("backendUrl").value.trim().replace(/\/+$/, "");
      const row = {
        lat: parseFloat(document.getElementById("lat").value),
        lon: parseFloat(document.getElementById("lon").value),
        timestamp: document.getElementById("ts").value,
        test_type: document.getElementById("tt").value
      };

      document.getElementById("status").innerText = "Predicting…";
      try {
        const resp = await fetch(`${backend}/predict-json`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ rows: [row] })
        });
        if (!resp.ok) throw new Error(await resp.text());
        const data = await resp.json();
        document.getElementById("output").innerText = JSON.stringify(data, null, 2);
        document.getElementById("status").innerText = "✅ Prediction complete.";
      } catch (e) {
        document.getElementById("status").innerText = "❌ Error: " + e.message;
      }
    }
  </script>
</body>
</html>
